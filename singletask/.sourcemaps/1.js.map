{"version":3,"sources":["../../src/pages/edit-task/edit-task.module.ts","../../src/providers/task.ts","../../src/pages/edit-task/edit-task.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { EditTask } from './edit-task';\nimport { Task } from '../../providers/task';\n\n@NgModule({\n  declarations: [\n    EditTask,\n  ],\n  imports: [\n    IonicPageModule.forChild(EditTask),\n  ],\n  providers: [Task],\n})\nexport class EditTaskModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/edit-task/edit-task.module.ts","import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class Task {\n\n  id: string; // Local storage ID\n\n  constructor() {\n    this.id = 'TODO-task';\n  }\n \n  getAll() {\n    let data = JSON.parse(localStorage.getItem(this.id));\n    return data == null ? [] : data;\n  }\n\n  // Sobreescreve todos os dados em this.id\n  setAll(all) {\n    localStorage.setItem(this.id, JSON.stringify(all));\n  }\n\n  add(data) {\n    data._id = this.getNextID();\n    var all = this.getAll();\n    all.push(data);\n    localStorage.setItem(this.id, JSON.stringify(all));\n  }\n\n  update(data) {\n    var all = this.getAll();\n    if(all !== null) {\n      let findById = (elm, idx, arr) => {\n        return elm._id == data._id;\n      };\n      let index = all.findIndex(findById);\n      if(all[index] !== undefined) {\n        all[index] = data;\n        localStorage.setItem(this.id, JSON.stringify(all));\n      }\n    }\n  }\n\n  delete(data) {\n    var all = this.getAll();\n    if(all !== null) {\n      let findById = (elm, idx, arr) => {\n        return elm._id == data._id;\n      };\n      let index = all.findIndex(findById);\n      console.log(index)\n      all.splice(index, 1);\n      localStorage.setItem(this.id, JSON.stringify(all));\n    }\n  }\n\n  getLastId() {\n    let ID = JSON.parse(localStorage.getItem('ID'+this.id));\n    return ID == null ? 0 : ID;\n  }\n\n  getNextID() {\n    let lastID = this.getLastId();\n    localStorage.setItem('ID'+this.id, JSON.stringify(lastID+1));\n    return lastID;\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/task.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController} from 'ionic-angular'; \nimport { Task } from '../../providers/task';\n\n@IonicPage()\n@Component({\n  selector: 'page-edit-task',\n  templateUrl: 'edit-task.html',\n})\nexport class EditTask {\n\n  tasks: any;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n              public taskProvider: Task, public alertCtrl: AlertController) {\n  }\n\n  ionViewDidLoad() {\n    this.refresh();\n  }\n  \n  refresh() {\n    this.tasks = this.taskProvider.getAll();\n\n    // TODO: rever!!\n    let fnSort = (a, b) => {\n      if(a.done && b.done) {\n        return 0;\n      } else if(a.done) {\n        return a._id < b._id;\n      } else {\n        return -1;\n      }\n    }\n\n    this.tasks.sort(fnSort);\n  }\n\n  reorderItems(indexes) {\n    let element = this.tasks[indexes.from];\n    this.tasks.splice(indexes.from, 1);\n    this.tasks.splice(indexes.to, 0, element);\n  }\n\n  applyChanges() {\n    this.taskProvider.setAll(this.tasks);\n    this.navCtrl.pop();\n  }\n\n  delete(task) {\n        let confirm = this.alertCtrl.create({\n      title: 'Excluir tarefa?',\n      message: 'Confirma exclusÃ£o da tarefa <b>' + task.description + '</b>?',\n      buttons: [\n        {\n          text: 'Cancelar',\n          handler: () => {}\n        },\n        {\n          text: 'Sim, excluir',\n          handler: () => {\n            this.taskProvider.delete(task);\n            this.refresh();\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/edit-task/edit-task.ts"],"sourceRoot":""}